<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OrderSys Installer Portal</title>
  <meta name="description" content="OrderSys delivery and installer endpoint for IT operators and evaluators.">
  <link rel="icon" type="image/png" href="/assets/logos/logo-thumb.png?v=20260223e">
  <link rel="apple-touch-icon" href="/assets/logos/logo-thumb.png?v=20260223e">
  <link rel="stylesheet" href="/assets/style.css?v=20260223i">
</head>
<body>
  <div class="page-bg" aria-hidden="true"></div>
  <header class="hero container" id="top">
    <div class="brand">
      <div class="brand-copy">
        <h1 class="brand-title">
          <img class="brand-text-logo" src="/assets/logos/logo-text.png?v=20260223e" alt="OrderSys" width="300" height="86">
        </h1>
        <p class="subtitle">On site self hosted ordering and recieveing system</p>
        <p class="note">Delivery &amp; installer endpoint</p>
      </div>
    </div>
  </header>

  <main class="container grid">
    <div class="grid-tools">
      <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle dark mode">Dark mode</button>
    </div>
    <section class="card" id="status" aria-labelledby="statusTitle">
      <h2 id="statusTitle">Status / Release Info</h2>
      <ul class="status-list">
        <li><strong>Current stable version:</strong> <span id="currentVersion">Checking…</span></li>
        <li><strong>Changelog source:</strong> <span id="changelogSource">Pending</span></li>
        <li><strong>Last checked:</strong> <span id="lastChecked">Pending</span></li>
        <li><strong>Endpoint health:</strong> stable.json <span id="stableHealth">checking</span></li>
        <li><strong>Endpoint health:</strong> changelog <span id="changelogHealth">checking</span></li>
      </ul>
      <p class="links-line">
        <a href="/update/changelog.md">View full changelog</a>
        <span>·</span>
        <a href="/update/stable.json">View signed manifest (advanced)</a>
      </p>
      <p class="small">Only the current stable release is published here. Current manifest: <a id="versionManifestLink" href="/update/stable.json">/update/stable.json</a>.</p>
      <pre id="changelogPreview" class="changelog" hidden></pre>
    </section>

    <section class="card" id="hosts" aria-labelledby="hostsTitle">
      <h2 id="hostsTitle">Supported Hosts</h2>
      <div class="table-wrap">
        <table>
          <tbody>
            <tr>
              <th>Supported OS</th>
              <td>Debian 12 (Bookworm) ✅<br>Debian 13 (Trixie) ✅</td>
            </tr>
            <tr>
              <th>CPU</th>
              <td>x86_64 (amd64) ✅<br>arm64: not yet supported</td>
            </tr>
            <tr>
              <th>Requirements</th>
              <td>Docker Engine + Docker Compose plugin<br>Internet access required for updates and image pulls</td>
            </tr>
            <tr>
              <th>Network</th>
              <td>LAN-first default; external exposure requires HTTPS enforcement</td>
            </tr>
            <tr>
              <th>Storage</th>
              <td><span class="muted">Recommendation:</span> at least 10 GB free disk space</td>
            </tr>
            <tr>
              <th>Ports</th>
              <td><span class="muted">Typical:</span> 80/443 ingress via proxy; internal service ports are not exposed directly</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="card" id="install" tabindex="-1" aria-labelledby="installTitle">
      <h2 id="installTitle">Install</h2>
      <div class="command-wrap">
        <pre class="command" id="installCommand">curl -fsSL https://ordersys.stonewallmedia.co.uk/install | bash</pre>
        <button class="copy-btn" id="copyInstallCommand" type="button">Copy</button>
      </div>
      <p class="small" id="copyResultInstall" aria-live="polite"></p>

      <h3 class="subsection-title">Update</h3>
      <p class="section-text">After install, admins can update directly from root console with <code>update ordersys</code>.</p>
      <div class="command-wrap">
        <pre class="command" id="updateCommand">curl -fsSL https://ordersys.stonewallmedia.co.uk/update.sh | bash</pre>
        <button class="copy-btn" id="copyUpdateCommand" type="button">Copy</button>
      </div>
      <p class="small" id="copyResultUpdate" aria-live="polite"></p>

      <details class="details">
        <summary>Show more</summary>
        <p class="section-text">The installer performs prerequisite checks, installs required dependencies, validates host compatibility, and guides setup for runtime components. This endpoint provides delivery artefacts only; no credentials are embedded.</p>
        <p class="section-text details-actions">
          <button class="inline-link-btn" id="viewInstallerBtn" type="button">View installer script</button>
          <button class="inline-link-btn" id="viewUpdateBtn" type="button">View update script</button>
        </p>
      </details>
    </section>

    <section class="card" id="support" aria-labelledby="supportTitle">
      <h2 id="supportTitle">Support / Contact</h2>
      <p>Email: <a href="mailto:support@stonewallmedia.co.uk">support@stonewallmedia.co.uk</a></p>
      <p>Documentation: <a href="https://www.stonewallmedia.co.uk/ordersys/" target="_blank" rel="noopener noreferrer">stonewallmedia.co.uk/ordersys</a></p>
      <p>Sales / Enquiries: <a href="mailto:sales@stonewallmedia.co.uk">sales@stonewallmedia.co.uk</a></p>
      <p class="small warn">Do not send secrets in email.</p>
    </section>
  </main>

  <div class="modal-backdrop" id="installerModal" hidden>
    <section class="modal" role="dialog" aria-modal="true" aria-labelledby="installerModalTitle">
      <header class="modal-header">
        <h2 id="installerModalTitle">Script Viewer</h2>
        <button type="button" class="modal-close" id="closeInstallerBtn" aria-label="Close script viewer">Close</button>
      </header>
      <p class="small" id="installerStatus">Loading script…</p>
      <pre class="modal-script" id="installerScript"></pre>
    </section>
  </div>

  <script src="/assets/app.js?v=20260223h" defer></script>
</body>
</html>
